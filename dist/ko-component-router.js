!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ko")):"function"==typeof define&&define.amd?define(["ko"],e):"object"==typeof exports?exports["ko-component-router"]=e(require("ko")):t["ko-component-router"]=e(t.ko)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n;n=r(6),n.router=r(34),n.router.state=r(11),n.router.utils=r(12),t.exports=function(){var t,e;return n.components.register("ko-component-router",e=r(13),t=r(14))}()},function(t){function e(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=Math.pow(2,53)-1;t.exports=e},function(t,e,r){function n(t){return null==t?!1:f.call(t)==u?p.test(s.call(t)):i(t)&&a.test(t)||!1}var o=r(32),i=r(3),u="[object Function]",a=/^\[object .+?Constructor\]$/,c=Object.prototype,s=Function.prototype.toString,f=c.toString,p=RegExp("^"+o(f).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t){function e(t){return t&&"object"==typeof t||!1}t.exports=e},function(t){function e(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}t.exports=e},function(t){function e(t,e){return t=+t,e=null==e?r:e,t>-1&&t%1==0&&e>t}var r=Math.pow(2,53)-1;t.exports=e},function(e){e.exports=t},function(t,e,r){function n(t){var e=i(t)?t.length:void 0;return o(e)&&c.call(t)==u||!1}var o=r(1),i=r(3),u="[object Arguments]",a=Object.prototype,c=a.toString;t.exports=n},function(t,e,r){var n=r(1),o=r(2),i=r(3),u="[object Array]",a=Object.prototype,c=a.toString,s=o(s=Array.isArray)&&s,f=s||function(t){return i(t)&&n(t.length)&&c.call(t)==u||!1};t.exports=f},function(t,e,r){function n(t){if(null==t)return[];c(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(i(t)||s.nonEnumArgs&&o(t))&&e||0;for(var r=t.constructor,n=-1,f="function"==typeof r&&r.prototype===t,l=Array(e),h=e>0;++n<e;)l[n]=n+"";for(var d in t)h&&u(d,e)||"constructor"==d&&(f||!p.call(t,d))||l.push(d);return l}var o=r(7),i=r(8),u=r(5),a=r(1),c=r(4),s=r(10),f=Object.prototype,p=f.hasOwnProperty;t.exports=n},function(t,e,r){(function(e){var n=r(2),o=/\bthis\b/,i=Object.prototype,u=(u=e.window)&&u.document,a=i.propertyIsEnumerable,c={};!function(){c.funcDecomp=!n(e.WinRTError)&&o.test(function(){return this}),c.funcNames="string"==typeof Function.name;try{c.dom=11===u.createDocumentFragment().nodeType}catch(t){c.dom=!1}try{c.nonEnumArgs=!a.call(arguments,1)}catch(t){c.nonEnumArgs=!0}}(0,0),t.exports=c}).call(e,function(){return this}())},function(t,e,r){var n,o,i;i=r(6),n=r(27),o=r(28),t.exports=i.pureComputed({read:function(){var t;return this.updateComputed(),null!=(t=history.state.koRouterState)?t:{}},write:function(t){return i.router.replace(i.router.current,{koRouterState:this.removeFuncs(t)}),this.updateComputed.notifySubscribers()},owner:{updateComputed:i.observable(),removeFuncs:function(t){var e,r,i;r={};for(e in t)switch(i=t[e],!1){case!n(i):continue;case!o(i):r[e]=this.removeFuncs(i);break;default:r[e]=i}return r}}})},function(t){var e;e=function(t){var e;return e=null!=t.indexOf&&!t.subscribe,e?[t]:t},t.exports={subscribe:function(t,r,n){var o,i,u;for(null==n&&(n=(new Date).getTime()),t=e(t),o=0,i=t.length;i>o;o++)u=t[o],null!=u.subscribe&&(null==u.subscriptions&&(u.subscriptions={}),u.subscriptions[n]=u.subscribe(r.bind(this)));return ko.router.exit(ko.router.current,function(){return ko.router.utils.unsubscribe.call(null,t)})},unsubscribe:function(t,r){var n,o,i,u,a,c,s,f,p,l,h;for(a=e(a),l=[],o=0,i=t.length;i>o;o++)if(u=t[o],null!=r)null!=(c=u.subscriptions)&&null!=(s=c[r])&&s.dispose(),l.push(null!=(f=u.subscriptions)?delete f[r]:void 0);else{p=u.subscriptions;for(n in p)h=p[n],h.dispose();l.push(u.subscriptions={})}return l}}},function(t,e,r){var n,o,i,u,a,c,s,f,p={}.hasOwnProperty;s=r(6),f=r(37),c=r(30),i={hashbang:!1,componentPrefix:"",basePath:"/"},a=function(t){return t.replace(/\/$/,"")},u=function(t,e){return this.activeRouteParams=c({},t.params,f(t.querystring)),e()},o=function(t){return function(e){return function(){return e.activeRouteComponent(""+s.router.config.componentPrefix+t)}}(this)},t.exports=n=function(){function t(t){var e,r,n,f,l;l=t.routes,n=t.options,s.router.config=c({},i,n),null==n.basePath&&s.router.config.hashbang&&(s.router.config.basePath=window.location.pathname),this.activeRouteComponent=s.observable(""),this.activeRouteParams={},e=a(s.router.config.basePath),s.router.config.hashbang&&history.redirect("/",e),s.router.base(e),s.router.apply(null,["*"].concat(s.router.config.middleware));for(f in l)p.call(l,f)&&(r=l[f],s.router(f,u.bind(this),o.call(this,r)));s.router.start(s.router.config)}return t}()},function(t){t.exports='<div data-bind="component: {\n name: activeRouteComponent,\n params: activeRouteParams\n}"></div>'},function(t,e,r){function n(t,e,r){var n=i(e);if(!r)return o(e,t,n);for(var u=-1,a=n.length;++u<a;){var c=n[u],s=t[c],f=r(s,e[c],c,t,e);(f===f?f===s:s!==s)&&("undefined"!=typeof s||c in t)||(t[c]=f)}return t}var o=r(16),i=r(31);t.exports=n},function(t){function e(t,e,r){r||(r=e,e={});for(var n=-1,o=r.length;++n<o;){var i=r[n];e[i]=t[i]}return e}t.exports=e},function(t,e,r){function n(t,e,r){for(var n=-1,i=o(t),u=r(t),a=u.length;++n<a;){var c=u[n];if(e(i[c],c,i)===!1)break}return t}var o=r(26);t.exports=n},function(t,e,r){function n(t,e){return o(t,e,i)}var o=r(17),i=r(9);t.exports=n},function(t){function e(t){return"function"==typeof t||!1}t.exports=e},function(t){function e(t){return"string"==typeof t?t:null==t?"":t+""}t.exports=e},function(t,e,r){function n(t,e,r){if("function"!=typeof t)return o;if("undefined"==typeof e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)};case 5:return function(r,n,o,i,u){return t.call(e,r,n,o,i,u)}}return function(){return t.apply(e,arguments)}}var o=r(33);t.exports=n},function(t,e,r){function n(t){return function(){var e=arguments.length,r=arguments[0];if(2>e||null==r)return r;if(e>3&&i(arguments[1],arguments[2],arguments[3])&&(e=2),e>3&&"function"==typeof arguments[e-2])var n=o(arguments[--e-1],arguments[e--],5);else e>2&&"function"==typeof arguments[e-1]&&(n=arguments[--e]);for(var u=0;++u<e;){var a=arguments[u];a&&t(r,a,n)}return r}}var o=r(21),i=r(23);t.exports=n},function(t,e,r){function n(t,e,r){if(!u(r))return!1;var n=typeof e;if("number"==n)var a=r.length,c=i(a)&&o(e,a);else c="string"==n&&e in r;if(c){var s=r[e];return t===t?t===s:s!==s}return!1}var o=r(5),i=r(1),u=r(4);t.exports=n},function(t,e,r){function n(t){var e;if(!i(t)||s.call(t)!=u||!c.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return o(t,function(t,e){r=e}),"undefined"==typeof r||c.call(t,r)}var o=r(18),i=r(3),u="[object Object]",a=Object.prototype,c=a.hasOwnProperty,s=a.toString;t.exports=n},function(t,e,r){function n(t){for(var e=c(t),r=e.length,n=r&&t.length,f=n&&a(n)&&(i(t)||s.nonEnumArgs&&o(t)),l=-1,h=[];++l<r;){var d=e[l];(f&&u(d,n)||p.call(t,d))&&h.push(d)}return h}var o=r(7),i=r(8),u=r(5),a=r(1),c=r(9),s=r(10),f=Object.prototype,p=f.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){return o(t)?t:Object(t)}var o=r(4);t.exports=n},function(t,e,r){(function(e){var n=r(19),o=r(2),i="[object Function]",u=Object.prototype,a=u.toString,c=o(c=e.Uint8Array)&&c,s=n(/x/)||c&&!n(c)?function(t){return a.call(t)==i}:n;t.exports=s}).call(e,function(){return this}())},function(t,e,r){var n=r(2),o=r(24),i="[object Object]",u=Object.prototype,a=u.toString,c=n(c=Object.getPrototypeOf)&&c,s=c?function(t){if(!t||a.call(t)!=i)return!1;var e=t.valueOf,r=n(e)&&(r=c(e))&&c(r);return r?t==r||c(t)==r:o(t)}:o;t.exports=s},function(t,e,r){var n=r(15),o=r(22),i=o(n);t.exports=i},function(t,e,r){t.exports=r(29)},function(t,e,r){var n=r(1),o=r(2),i=r(4),u=r(25),a=o(a=Object.keys)&&a,c=a?function(t){if(t)var e=t.constructor,r=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r&&n(r)?u(t):i(t)?a(t):[]}:u;t.exports=c},function(t,e,r){function n(t){return t=o(t),t&&u.test(t)?t.replace(i,"\\$&"):t}var o=r(20),i=/[.*+?^${}()|[\]\/\\]/g,u=RegExp(i.source);t.exports=n},function(t){function e(t){return t}t.exports=e},function(t,e,r){"use strict";function n(t,e){if("function"==typeof t)return n("*",t);if("function"==typeof e)for(var r=new a(t),o=1;o<arguments.length;++o)n.callbacks.push(r.middleware(arguments[o]));else"string"==typeof t?n["string"==typeof e?"redirect":"show"](t,e):n.start(t)}function o(t){if(!t.handled){var e;e=A?j+x.hash.replace("#!",""):x.pathname+x.search,e!==t.canonicalPath&&(n.stop(),t.handled=!1,x.href=t.canonicalPath)}}function i(t){return"string"!=typeof t?t:O?decodeURIComponent(t.replace(/\+/g," ")):t}function u(t,e){"/"===t[0]&&0!==t.indexOf(j)&&(t=j+(A?"#!":"")+t);var r=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(j,"")||"/",A&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=e||{},this.state.path=t,this.querystring=~r?i(t.slice(r+1)):"",this.pathname=i(~r?t.slice(0,r):t),this.params={},this.hash="",!A){if(!~this.path.indexOf("#"))return;var n=this.path.split("#");this.path=n[0],this.hash=i(n[1])||"",this.querystring=this.querystring.split("#")[0]}}function a(t,e){e=e||{},this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=g(this.path,this.keys=[],e.sensitive,e.strict)}function c(t){if(t.state){var e=t.state.path;n.replace(e,t.state)}else n.show(x.pathname+x.hash,void 0,void 0,!1)}function s(t){if(1===v(t)&&!t.defaultPrevented){var e=t.target;if(d(e)&&!e.getAttribute("download")&&"external"!==e.getAttribute("rel")){var r=e.getAttribute("href");if((A||e.pathname!==x.pathname||!e.hash&&"#"!==r)&&!(r&&r.indexOf("mailto:")>-1)&&!e.target&&m(e.href)){var o=h(e),i=o;if(o=o.replace(j,""),A&&(o=o.replace("#!","")),!j||i!==o)if(t.metaKey||t.ctrlKey||t.shiftKey){if(A){t.preventDefault();var u=j+"#!"+o,a=t.metaKey||t.ctrlKey?null:"_blank";window.open(u,a)}}else t.preventDefault(),n.show(i)}}}}function f(t){if(!t.defaultPrevented){var e=t.target;d(e)&&(e.hasAttribute("data-page-href")||(l=l.bind(null,e),p(e),window.addEventListener("click",l)))}}function p(t){var e=h(t),r=t.getAttribute("href");e=e.replace(j,"").replace("#!","");var n=j+"#!"+e;t.setAttribute("data-page-href",r),t.setAttribute("href",n)}function l(t){var e=t.getAttribute("data-page-href");t.setAttribute("href",e),t.removeAttribute("data-page-href"),window.removeEventListener("click",l)}function h(t){return t.pathname+t.search+(t.hash||"")}function d(t){for(;t&&"A"!==t.nodeName;)t=t.parentNode;return t&&"A"===t.nodeName?!0:!1}function v(t){return t=t||window.event,null===t.which?t.button:t.which}function m(t){var e=x.protocol+"//"+x.hostname;return x.port&&(e+=":"+x.port),t&&0===t.indexOf(e)}var g=r(35);t.exports=n;var y,b,x="undefined"!=typeof window&&(window.history.location||window.location),w=!0,O=!0,j="",A=!1;n.callbacks=[],n.exits=[],n.current="",n.len=0,n.base=function(t){return 0===arguments.length?j:void(j=t)},n.start=function(t){if(t=t||{},!y&&(y=!0,!1===t.dispatch&&(w=!1),!1===t.decodeURLComponents&&(O=!1),!1!==t.popstate&&window.addEventListener("popstate",c,!1),!1!==t.click&&window.addEventListener("click",s,!1),!0===t.hashbang&&(A=!0),window.addEventListener("contextmenu",f,!1),w)){var e=A&&~x.hash.indexOf("#!")?x.hash.substr(2)+x.search:x.pathname+x.search+x.hash;n.replace(e,null,!0,w)}},n.stop=function(){y&&(n.current="",n.len=0,y=!1,window.removeEventListener("click",s,!1),window.removeEventListener("contextmenu",f,!1),window.removeEventListener("popstate",c,!1))},n.show=function(t,e,r,o){var i=new u(t,e);return n.current=i.path,!1!==r&&n.dispatch(i),!1!==i.handled&&!1!==o&&i.pushState(),i},n.back=function(t,e){n.len>0?(history.back(),n.len--):setTimeout(t?function(){n.show(t,e)}:function(){n.show(j,e)})},n.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&n(t,function(){setTimeout(function(){n.replace(e)},0)}),"string"==typeof t&&"undefined"==typeof e&&setTimeout(function(){n.replace(t)},0)},n.replace=function(t,e,r,o){var i=new u(t,e);return n.current=i.path,i.init=r,i.save(),!1!==o&&n.dispatch(i),i},n.dispatch=function(t){function e(){var t=n.exits[a++];return t?void t(i,e):r()}function r(){var e=n.callbacks[u++];return t.path!==n.current?void(t.handled=!1):e?void e(t,r):o(t)}var i=b,u=0,a=0;b=t,i?e():r()},n.exit=function(t){if("function"==typeof t)return n.exit("*",t);for(var e=new a(t),r=1;r<arguments.length;++r)n.exits.push(e.middleware(arguments[r]))},n.Context=u,u.prototype.pushState=function(){n.len++,history.pushState(this.state,this.title,A&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},u.prototype.save=function(){history.replaceState(this.state,this.title,A&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},n.Route=a,a.prototype.middleware=function(t){var e=this;return function(r,n){return e.match(r.path,r.params)?t(r,n):void n()}},a.prototype.match=function(t,e){var r=this.keys,n=t.indexOf("?"),o=~n?t.slice(0,n):t,u=this.regexp.exec(decodeURIComponent(o));if(!u)return!1;for(var a=1,c=u.length;c>a;++a){var s=r[a-1],f=i(u[a]);void 0===f&&hasOwnProperty.call(e,s.name)||(e[s.name]=f)}return!0},n.sameOrigin=m},function(t,e,r){function n(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function o(t,e){return t.keys=e,t}function i(t){return t.sensitive?"":"i"}function u(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,delimiter:null,optional:!1,repeat:!1});return o(t,e)}function a(t,e,r){for(var n=[],u=0;u<t.length;u++)n.push(s(t[u],e,r).source);var a=new RegExp("(?:"+n.join("|")+")",i(r));return o(a,e)}function c(t,e){function r(t,r,i,u,a,c,s,f){if(r)return r;if(f)return"\\"+f;var p="+"===s||"*"===s,l="?"===s||"*"===s;return e.push({name:u||o++,delimiter:i||"/",optional:l,repeat:p}),i=i?"\\"+i:"",a=n(a||c||"[^"+(i||"\\/")+"]+?"),p&&(a=a+"(?:"+i+a+")*"),l?"(?:"+i+"("+a+"))?":i+"("+a+")"}var o=0;return t.replace(p,r)}function s(t,e,r){if(e=e||[],f(e)?r||(r={}):(r=e,e=[]),t instanceof RegExp)return u(t,e,r);if(f(t))return a(t,e,r);var n=r.strict,s=r.end!==!1,p=c(t,e),l="/"===t.charAt(t.length-1);return n||(p=(l?p.slice(0,-2):p)+"(?:\\/(?=$))?"),p+=s?"$":n&&l?"":"(?=\\/|$)",o(new RegExp("^"+p,i(r)),e)}var f=r(36);t.exports=s;var p=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g")},function(t){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,r){var n=r(38),o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};o.parseValues=function(t,e){for(var r={},o=t.split(e.delimiter,1/0===e.parameterLimit?void 0:e.parameterLimit),i=0,u=o.length;u>i;++i){var a=o[i],c=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===c)r[n.decode(a)]="";else{var s=n.decode(a.slice(0,c)),f=n.decode(a.slice(c+1));r[s]=r.hasOwnProperty(s)?[].concat(r[s]).concat(f):f}}return r},o.parseObject=function(t,e,r){if(!t.length)return e;var n=t.shift(),i={};if("[]"===n)i=[],i=i.concat(o.parseObject(t,e,r));else{var u="["===n[0]&&"]"===n[n.length-1]?n.slice(1,n.length-1):n,a=parseInt(u,10),c=""+a;!isNaN(a)&&n!==u&&c===u&&a>=0&&a<=r.arrayLimit?(i=[],i[a]=o.parseObject(t,e,r)):i[u]=o.parseObject(t,e,r)}return i},o.parseKeys=function(t,e,r){if(t){var n=/^([^\[\]]*)/,i=/(\[[^\[\]]*\])/g,u=n.exec(t);if(!Object.prototype.hasOwnProperty(u[1])){var a=[];u[1]&&a.push(u[1]);for(var c=0;null!==(u=i.exec(t))&&c<r.depth;)++c,Object.prototype.hasOwnProperty(u[1].replace(/\[|\]/g,""))||a.push(u[1]);return u&&a.push("["+t.slice(u.index)+"]"),o.parseObject(a,e,r)}}},t.exports=function(t,e){if(""===t||null===t||"undefined"==typeof t)return{};e=e||{},e.delimiter="string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:o.delimiter,e.depth="number"==typeof e.depth?e.depth:o.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit;for(var r="string"==typeof t?o.parseValues(t,e):t,i={},u=Object.keys(r),a=0,c=u.length;c>a;++a){var s=u[a],f=o.parseKeys(s,r[s],e);i=n.merge(i,f)}return n.compact(i)}},function(t,e){e.arrayToObject=function(t){for(var e={},r=0,n=t.length;n>r;++r)"undefined"!=typeof t[r]&&(e[r]=t[r]);return e},e.merge=function(t,r){if(!r)return t;if("object"!=typeof r)return Array.isArray(t)?t.push(r):t[r]=!0,t;if("object"!=typeof t)return t=[t].concat(r);Array.isArray(t)&&!Array.isArray(r)&&(t=e.arrayToObject(t));for(var n=Object.keys(r),o=0,i=n.length;i>o;++o){var u=n[o],a=r[u];t[u]=t[u]?e.merge(t[u],a):a}return t},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.compact=function(t,r){if("object"!=typeof t||null===t)return t;r=r||[];var n=r.indexOf(t);if(-1!==n)return r[n];if(r.push(t),Array.isArray(t)){for(var o=[],i=0,u=t.length;u>i;++i)"undefined"!=typeof t[i]&&o.push(t[i]);return o}var a=Object.keys(t);for(i=0,u=a.length;u>i;++i){var c=a[i];t[c]=e.compact(t[c],r)}return t},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null===t||"undefined"==typeof t?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}}])});